!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("prism-purejs-core",[],t):"object"==typeof exports?exports["prism-purejs-core"]=t():e["prism-purejs-core"]=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=7)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"isElementTypeOf",value:function(e){var t=e.element,n=e.tag,r=!1;return t&&t.tagName&&t.tagName.toLowerCase()===n.toLowerCase()&&(r=!0),r}},{key:"isElementOfTypeSVG",value:function(t){return e.isElementTypeOf({element:t,tag:"svg"})||e.isElementTypeOf({element:t,tag:"use"})}},{key:"getParentDomElements",value:function(t){for(var n=t.element,r=t.stopElement,o=void 0===r?"body":r,u=[],i=n.parentElement;i&&!e.isElementTypeOf({element:i,tag:o});i=i.parentElement)i&&i.tagName&&u.push(i);return u}},{key:"getFirstParentDifferentFromSVG",value:function(t){var n=void 0;if(e.isElementOfTypeSVG(t)){for(var r=e.getParentDomElements({element:t}),o=0;o<r.length;o++)if(!e.isElementOfTypeSVG(r[o])){n=r[o];break}}else n=t;return n}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"click",get:function(){return"click"}},{key:"dblclick",get:function(){return"dblclick"}},{key:"contextmenu",get:function(){return"contextmenu"}},{key:"mousewheel",get:function(){return"mousewheel"}},{key:"mousedown",get:function(){return"mousedown"}},{key:"mouseup",get:function(){return"mouseup"}},{key:"mouseenter",get:function(){return"mouseenter"}},{key:"mouseleave",get:function(){return"mouseleave"}},{key:"mousemove",get:function(){return"mousemove"}},{key:"mouseover",get:function(){return"mouseover"}},{key:"mouseout",get:function(){return"mouseout"}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"bindEvent",value:function(e){var t=e.event,n=e.element,r=e.callback,o=e.useCapture,u=void 0===o||o;n.addEventListener?n.addEventListener(t,r,u):n.attachEvent&&n.attachEvent("on"+t,r)}},{key:"unbindEvent",value:function(e){var t=e.event,n=e.element,r=e.callback,o=e.useCapture,u=void 0===o||o;n.removeEventListener?n.removeEventListener(t,r,u):n.detachEvent&&n.detachEvent("on"+t,r)}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"keydown",get:function(){return"keydown"}},{key:"keypress",get:function(){return"keypress"}},{key:"keyup",get:function(){return"keyup"}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"blur",get:function(){return"blur"}},{key:"change",get:function(){return"change"}},{key:"focus",get:function(){return"focus"}},{key:"scroll",get:function(){return"scroll"}},{key:"copy",get:function(){return"copy"}},{key:"paste",get:function(){return"paste"}},{key:"cut",get:function(){return"cut"}},{key:"error",get:function(){return"error"}},{key:"focusin",get:function(){return"focusin"}},{key:"focusout",get:function(){return"focusout"}},{key:"hashchange",get:function(){return"hashchange"}},{key:"load",get:function(){return"load"}},{key:"reset",get:function(){return"reset"}},{key:"resize",get:function(){return"resize"}},{key:"select",get:function(){return"select"}},{key:"submit",get:function(){return"submit"}},{key:"unload",get:function(){return"unload"}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=r(i),l=n(12),c=r(l),s=function(){function e(){o(this,e)}return u(e,null,[{key:"findClickableParent",value:function(t){for(var n=void 0,r=t.parentElement;r&&!a.default.isElementTypeOf({element:r,tag:"body"});r=r.parentElement)if(r&&r.tagName&&e.isClickable(r)){n=r;break}return n}},{key:"isClickable",value:function(t){return e.isClickableElement(t)||e.wasClickRoleAttrFound(t)||e.isAngularClickEvent(t)}},{key:"wasClickRoleAttrFound",value:function(e){if(!e.getAttribute("role"))return!1;var t=e.getAttribute("role"),n=Reflect.ownKeys(c.default);for(var r in n)if(n.hasOwnProperty(r)&&n[r]===t)return!0;return!1}},{key:"isAngularClickEvent",value:function(e){for(var t=["ng-click","data-ng-click","ng-mousedown","data-ng-mousedown","ng-mouseup","data-ng-mouseup"],n=0;n<t.length;n++)if(e.getAttribute(t[n]))return!0;return!1}},{key:"isClickableElement",value:function(e){var t=void 0;switch(e.tagName.toLowerCase()){case"a":case"button":case"input":case"textarea":case"select":case"option":case"label":t=!0;break;default:t=!1}return t}},{key:"isJqueryClickable",value:function(e){if(!jQuery)return!1;var t=jQuery._data(e,"events");return t?!!t.click&&void 0!==t.click.delegateCount&&0===t.click.delegateCount:void 0}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"sanitize",value:function(t){return t.split("").map(function(t){return e.regex.test(t)?"\\"+t:t}).join("")}},{key:"regex",get:function(){return/[!"#$%&'()*+,.\/|\\;:<=>?@\[\]^`{}~]/}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Sanitizer=t.PrismStorageManager=t.PrismElementModel=t.PrismEventsHandler=t.PrismEvents=t.MouseEvents=t.KeyboardEvents=t.EventsValidator=t.ElementHighligher=t.ElementCommon=t.DomEvents=t.DomEventHandler=t.DetectBrowser=t.AUTConfigurations=void 0;var o=n(8),u=r(o),i=n(1),a=r(i),l=n(3),c=r(l),s=n(4),f=r(s),d=n(9),v=r(d),y=n(10),m=r(y),g=n(2),p=r(g),h=n(0),b=r(h),k=n(11),E=r(k),w=n(13),_=r(w),C=n(14),x=r(C),S=n(16),O=r(S),P=n(6),T=r(P),M=n(17),j=r(M);t.AUTConfigurations=v.default,t.DetectBrowser=m.default,t.DomEventHandler=p.default,t.DomEvents=f.default,t.ElementCommon=b.default,t.ElementHighligher=E.default,t.EventsValidator=j.default,t.KeyboardEvents=c.default,t.MouseEvents=a.default,t.PrismEvents=u.default,t.PrismEventsHandler=_.default,t.PrismElementModel=x.default,t.PrismStorageManager=O.default,t.Sanitizer=T.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"prism",get:function(){return"prism::"}},{key:"request",get:function(){return e.prism+"request::"}},{key:"respond",get:function(){return e.prism+"respond::"}},{key:"notify",get:function(){return e.prism+"notify::"}},{key:"set",get:function(){return e.prism+"set::"}},{key:"requestAUTData",get:function(){return e.request+"AUTData"}},{key:"respondAUTData",get:function(){return e.respond+"AUTData"}},{key:"requestTrackedEvents",get:function(){return e.request+"trackedEvents"}},{key:"respondTrackedEvents",get:function(){return e.respond+"trackedEvents"}},{key:"requestCaputuredEvents",get:function(){return e.request+"capturedEvents"}},{key:"respondCaputuredEvents",get:function(){return e.respond+"capturedEvents"}},{key:"setAgentRecordingModeToManual",get:function(){return e.set+"agentRecordingModeToManual"}},{key:"setAgentRecordingModeToAutomation",get:function(){return e.set+"agentRecordingModeToAutomation"}},{key:"setAgentTags",get:function(){return e.set+"agentTags"}},{key:"notifyExtensionLoaded",get:function(){return e.notify+"extensionLoaded"}},{key:"notifyAgentLoaded",get:function(){return e.notify+"agentLoaded"}},{key:"toggleRecord",get:function(){return e.prism+"toggleRecord"}},{key:"sendData",get:function(){return e.prism+"sendData"}},{key:"runtimeError",get:function(){return e.prism+"runtime::error"}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(t){var n=t.appName,o=t.environment,u=t.product,i=t.productURL,a=t.tenantID,l=t.ctClient,c=t.ctSecret;r(this,e),this._appName=n,this._environment=o,this._product=u,this._productURL=i,this._tenantID=a,this._ctClient=l,this._ctSecret=c,this._autClickableClasses=null,this._autMeaninglessClasses=null}return o(e,[{key:"clickableClasses",set:function(e){this._autClickableClasses=e},get:function(){return this._autClickableClasses}},{key:"meaninglessClasses",set:function(e){this._autMeaninglessClasses=e},get:function(){return this._autMeaninglessClasses}},{key:"autData",get:function(){return{appName:this._appName,environment:this._environment,product:this._product,productURL:this._productURL,tenantID:this._tenantID,clickableClasses:this.clickableClasses,meaninglessClasses:this.meaninglessClasses,trackedEvents:this.trackedEvents}}},{key:"trackedEvents",set:function(e){this._trackedEvents=e},get:function(){return this._trackedEvents}},{key:"agentCreds",get:function(){return{ctClient:this._ctClient,ctSecret:this._ctSecret}}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"clientBrowser",value:function(){var t={browser:null,version:null,isMobile:null};if(navigator){var n=void 0,r=navigator.userAgent.toLowerCase(),o=/MSIE\s+(\d+(\.\d+)*)/i,u=/Chrome\/(\d+(\.\d+)*)/i,i=/Firefox\/(\d+(\.\d+)*)/i,a=/Opera\/(\d+(\.\d+)*)/i,l=/Safari\/(\d+(\.\d+)*)/i;r.indexOf("Trident/")>0?null!==(n=o.exec(r))?t.browser=e.internetExplorer:t.browser=e.edge:null!==(n=u.exec(r))?t.browser=e.chrome:null!==(n=i.exec(r))?t.browser=e.firefox:null!==(n=a.exec(r))?t.browser=e.opera:null!==(n=l.exec(r))?t.browser=e.safari:t.browser=e.unknown,t.version=null!==n?n[1]:null,t.isMobile=r.indexOf("mobi")>=0}return t}},{key:"internetExplorer",get:function(){return"IE"}},{key:"edge",get:function(){return"Edge"}},{key:"chrome",get:function(){return"Chrome"}},{key:"safari",get:function(){return"Safari"}},{key:"firefox",get:function(){return"Firefox"}},{key:"opera",get:function(){return"Opera"}},{key:"unknown",get:function(){return"Unknown"}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=r(i),l=n(5),c=r(l),s=n(2),f=r(s),d=n(0),v=r(d),y=function(){function e(t){var n=t.hoverColor,r=void 0===n?"blue":n,u=t.clickableColor,i=void 0===u?"green":u;o(this,e),this.lastHighlightedElement=null,this.highlighterSize=6,this.hoverColor=r,this.clickableColor=i,this.createHoverElement({})}return u(e,[{key:"init",value:function(){this.toggleHighlighter(!0)}},{key:"toggleHighlighter",value:function(e){this.isEnabled=e,e?this.attachEventListeners():(this.elem.style.display="none",this.removeAllEventListeners())}},{key:"attachEventListeners",value:function(){f.default.bindEvent({event:a.default.mousemove,element:document.body,callback:this.hoverOver.bind(this)}),f.default.bindEvent({event:a.default.mouseleave,element:document.body,callback:this.hideHoverElement.bind(this)})}},{key:"removeAllEventListeners",value:function(){f.default.unbindEvent({event:a.default.mousemove,element:document.body,callback:this.hoverOver.bind(this)}),f.default.unbindEvent({event:a.default.mouseleave,element:document.body,callback:this.hideHoverElement.bind(this)})}},{key:"createHoverElement",value:function(e){var t=e.opacity,n=void 0===t?.2:t,r=document.createElement("div");r.style.position="absolute",r.style.display="none",r.style.backgroundColor=this.hoverColor,r.style.opacity=n,r.style.pointerEvents="none",r.style.zIndex=Number.MAX_SAFE_INTEGER,document.body.appendChild(r),this.elem=r}},{key:"hideHoverElement",value:function(){this.isEnabled&&(this.elem.style.display="none",this.lastHighlightedElement=null)}},{key:"hoverOver",value:function(t){if(this.isEnabled){var n=t.target||t.srcElement;n=v.default.getFirstParentDifferentFromSVG(n),n&&!n.isSameNode(this.lastHighlightedElement)&&(c.default.isClickable(n)||c.default.findClickableParent(n)?this.elem.style.backgroundColor=this.clickableColor:this.elem.style.backgroundColor=this.hoverColor,this.lastHighlightedElement=n,e.highlightElement({target:n,highlighterElement:this.elem,highlighterSize:this.highlighterSize}))}}}],[{key:"highlightElement",value:function(e){var t=e.target,n=e.highlighterElement,r=e.highlighterSize,o=void 0===r?5:r;if(t&&t.getBoundingClientRect&&!t.isSameNode(n)){var u="rtl"===document.dir,i=document.documentElement,a=t.getBoundingClientRect(),l=(window.pageXOffset||i.scrollLeft)-(i.clientLeft||0),c=(window.pageYOffset||i.scrollTop)-(i.clientTop||0);n.style.height=t.offsetHeight+o+"px",n.style.width=t.offsetWidth+o+"px",n.style.top=a.top+c-o/2+"px",n.style.bottom=a.top+c+t.offsetHeight+o/2+"px",u?(n.style.left=i.offsetWidth-(a.left-l-o/2)+"px",n.style.right=i.offsetWidth-(a.left-l+t.offsetWidth+o/2)+"px"):(n.style.left=a.left+l-o/2+"px",n.style.right=a.left+l+t.offsetWidth+o/2+"px"),n.style.display="block"}}}]),e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"button",get:function(){return"button"}},{key:"checkbox",get:function(){return"checkbox"}},{key:"combobox",get:function(){return"combobox"}},{key:"link",get:function(){return"link"}},{key:"listbox",get:function(){return"listbox"}},{key:"listitem",get:function(){return"listitem"}},{key:"menuitem",get:function(){return"menuitem"}},{key:"menuitemcheckbox",get:function(){return"menuitemcheckbox"}},{key:"menuitemradio",get:function(){return"menuitemradio"}},{key:"option",get:function(){return"option"}},{key:"radio",get:function(){return"radio"}},{key:"scrollbar",get:function(){return"scrollbar"}},{key:"slider",get:function(){return"slider"}},{key:"spinbutton",get:function(){return"spinbutton"}},{key:"tab",get:function(){return"tab"}},{key:"textbox",get:function(){return"textbox"}},{key:"treeitem",get:function(){return"treeitem"}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(2),i=function(e){return e&&e.__esModule?e:{default:e}}(u),a=function(){function e(){r(this,e)}return o(e,null,[{key:"onEvent",value:function(e){var t=e.event,n=e.callback;i.default.bindEvent({event:t,callback:n,element:document})}},{key:"fireEvent",value:function(e){var t=e.event,n=e.data,r=void 0===n?void 0:n,o=document.createEvent("Event");o.initEvent(t,!0,!0),o.data=r,document.dispatchEvent(o)}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),a=r(i),l=n(15),c=r(l),s=function(){function e(t){o(this,e);var n=Date.now();this._event=t,this._model=e.initEventModel({event:t,clientTime:n}),console.log(this._model,"took "+(this._model["selector-generation-time"]-n)+"ms")}return u(e,null,[{key:"runManual",get:function(){return"manual"}},{key:"runUser",get:function(){return"user"}},{key:"runAutomation",get:function(){return"automation"}}]),u(e,[{key:"applyAUTData",value:function(e){var t=e.appName,n=e.environment,r=e.tenantID;this._model["aut-data"]["app-name"]=t,this._model["aut-data"]["tenant-id"]=r,this._model.context.environment=n}},{key:"applyBrowserData",value:function(e){this._model["client-data"].browser=e}},{key:"applyRunMode",value:function(e){this._model["test-data"].mode=e}},{key:"applyRunStep",value:function(e){this._model["test-data"].step=e}},{key:"applyTags",value:function(e){this._model.context.tags=e}},{key:"convertModelToString",value:function(){return JSON.stringify(this._model)}}],[{key:"initEventModel",value:function(t){var n=t.event,r=t.clientTime,o=void 0,u=void 0,i=n.target||n.srcElement,l=c.default.buildSelectorsObject(i);if(l.uniqueSelector=c.default.buildPathSelector({element:i}),l.isUnique=c.default.isSelectorUnique(l.uniqueSelector),!(l.isClickable=a.default.isClickable(i))){var s=a.default.findClickableParent(i);if(s){var f=c.default.buildSelectorString(s);u=c.default.buildSelectorsObject(s),u.uniqueSelector=l.uniqueSelector.substring(0,l.uniqueSelector.indexOf(f)+f.length),u.isUnique=c.default.isSelectorUnique(u.uniqueSelector)}}return o=e.getEventModel({targetSelector:l,parentSelector:u,eventType:n.type,clientTime:r}),o["client-data"].time=r,o["selector-generation-time"]=Date.now(),o}},{key:"getEventModel",value:function(e){var t=e.eventType,n=e.targetSelector,r=e.parentSelector,o={"selector-generation-time":null,"session-id":null,"client-data":{time:null,browser:null,"geo-location":null},"url-data":{protocol:document.location.protocol,domain:document.location.host,path:document.location.pathname,params:document.location.search,hash:document.location.hash},"aut-data":{"app-name":null,"tenant-id":null,"custom-fields":null},context:{environment:null,tags:null},"test-data":{mode:null,"user-id":null,name:null,package:null,step:null,"extra-details":null},"selector-data":{"event-type":t,"element-tag":n.tagName,id:n.id,class:n.class,attr:n.attributes,"nth-position":n.nthPosition,"is-unique-in-page":n.isUnique,"unique-selector":n.uniqueSelector,"is-clickable":n.isClickable}};return r&&(o["selector-data"]["clickable-parent"]={"element-tag":r.tagName,id:r.id,class:r.class,attr:r.attributes,"nth-position":r.nthPosition,"is-unique-in-page":r.isUnique,"unique-selector":r.uniqueSelector}),o}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),a=r(i),l=n(6),c=r(l),s=function(){function e(){o(this,e)}return u(e,null,[{key:"isSelectorUnique",value:function(e){return 1===document.body.querySelectorAll(e.replace(/:nth-child\(\d+\)/g,"")).length}},{key:"buildAttributesSelector",value:function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="["+n+(e[n]?'="'+e[n]+'"':"")+"]");return t}},{key:"buildClassSelector",value:function(e){var t="";return t+=""+e.split(/\s+/).map(function(e){return 0!==e.trim().length?"."+e:""}).join("")}},{key:"buildSelectorsObject",value:function(t){var n={};if(n.tagName=t.tagName.toLowerCase(),t.attributes){n.attributes={};for(var r=0;r<t.attributes.length;r++){var o=t.attributes[r].name,u=c.default.sanitize(t.attributes[r].value);switch(o.toLowerCase()){case"id":case"class":n[o]=u;break;default:n.attributes[o]=u}}}return n.nthPosition=e.elementNthPosition(t),n}},{key:"buildSelectorString",value:function(t){var n=e.buildSelectorsObject(t),r=n.tagName;return n.id?r+="#"+n.id:n.class?r+=e.buildClassSelector(n.class)+":nth-child("+n.nthPosition+")":r+=":nth-child("+n.nthPosition+")",r}},{key:"buildPathSelector",value:function(t){var n=t.element,r=t.depth,o=void 0===r?-1:r,u="";if(!n.id){var i=a.default.getParentDomElements({element:n});o=o<0?i.length:o>i.length?i.length:o;for(var l=0;l<o&&(u=e.buildSelectorString(i[l])+" > "+u,!i[l].id);l++);}return u+=e.buildSelectorString(n)}},{key:"elementNthPosition",value:function(e){for(var t=1,n=e;null!==(n=n.previousElementSibling);)t++;return t}},{key:"isElementUnique",value:function(t){return t.id?1===document.body.querySelectorAll('[id="'+t.id+'"]').length:t.class?1===document.body.querySelectorAll('[class="'+t.class+'"]').length:t.attributes?1===document.body.querySelectorAll(t.tagName+e.buildAttributesSelector(t.attributes)).length:1===document.body.querySelectorAll(t.tagName).length}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){function e(){r(this,e)}return o(e,null,[{key:"save",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},{key:"load",value:function(e){return JSON.parse(localStorage.getItem(e))}},{key:"clear",value:function(e){localStorage.removeItem(e)}}]),e}();t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),l=r(a),c=n(3),s=r(c),f=n(1),d=r(f),v=n(18),y=function(){function e(){u(this,e)}return i(e,null,[{key:"validateEventsArray",value:function(t){var n=new Set,r=[],u=[],i=e.blackList,a=e.whiteList,l=!0,c=!1,s=void 0;try{for(var f,d=t[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var y=f.value,m=y.replace(/^on/i,"").trim();-1!==i.indexOf(m)?r.push(y):-1!==a.indexOf(m)?n.add(m):u.push(y)}}catch(e){c=!0,s=e}finally{try{!l&&d.return&&d.return()}finally{if(c)throw s}}return r.length>0&&console.error(v.eventsValidator.blacklist+"\n"+r.toString()),u.length>0&&console.warn(v.eventsValidator.unknown+"\n"+u.toString()),(r.length>0||u.length>0)&&console.info(v.eventsValidator.whitelist+"\n"+a),[].concat(o(n))}},{key:"blackList",get:function(){return[d.default.mousemove,d.default.mouseover,d.default.mouseleave,d.default.mouseout,d.default.mouseenter,l.default.load,l.default.error,l.default.copy,l.default.cut,l.default.paste,l.default.focusin,l.default.focusout,l.default.hashchange,l.default.reset,l.default.resize,l.default.unload,l.default.select,l.default.submit]}},{key:"whiteList",get:function(){var t=void 0,n=Reflect.ownKeys(l.default),r=Reflect.ownKeys(s.default),u=Reflect.ownKeys(d.default);t=new Set([].concat(o(n),o(r),o(u)));var i=["length","prototype","name"].concat(o(e.blackList)),a=!0,c=!1,f=void 0;try{for(var v,y=i[Symbol.iterator]();!(a=(v=y.next()).done);a=!0){var m=v.value;t.delete(m)}}catch(e){c=!0,f=e}finally{try{!a&&y.return&&y.return()}finally{if(c)throw f}}return[].concat(o(t))}}]),e}();t.default=y,e.exports=t.default},function(e,t){e.exports={"//":"You can replace variables in strings by replacing $[VAR_INDEX]",eventsValidator:{blacklist:"The following events are not recommended for monitoring by Prism:",unknown:"The following events are not supported for monitoring by Prism:",whitelist:"The following events are allowed for monitoring by Prism:"},prismStorageManager:{key:"prism::savedData"}}}])});